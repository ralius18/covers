(function(){"use strict";var t={6510:function(t,e,n){var s=n(144),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",{staticClass:"main"},[n("header-bar"),n("router-view",{staticClass:"router-view"})],1)],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("v-row",[n("h1",{staticClass:"text-primary-lighten-1"},[n("router-link",{attrs:{to:"/"}},[t._v("Brad's Covers")])],1),n("v-spacer"),t.user.loggedIn?n("v-btn",{on:{click:t.logOut}},[t._v("Log Out")]):n("router-link",{attrs:{to:"/login"}},[n("v-btn",[t._v("Log In")])],1)],1)],1)},a=[],l=n(7391);const c=(0,l.Q_)("main",{state:()=>({user:{loggedIn:!1,data:null}}),actions:{setLoggedIn(t){this.$state.user.loggedIn=t},setUser(t){this.$state.user.data=t},fetchUser(t){this.setLoggedIn(null!==t),t?this.setUser(t):this.setUser(null)}}});var u=n(1902),d=s.Z.extend({name:"HeaderBar",methods:{logOut(){u.Z.auth().signOut()}},computed:{...(0,l.rn)(c,["user"])}}),h=d,v=n(1001),p=n(3453),g=n.n(p),f=n(4995),m=n(2877),_=n(9762),b=(0,v.Z)(h,o,a,!1,null,"10b93617",null),k=b.exports;g()(b,{VBtn:f.Z,VRow:m.Z,VSpacer:_.Z});var y=s.Z.extend({name:"App",components:{HeaderBar:k},beforeCreate(){u.Z.auth().onAuthStateChanged((t=>{const e=c();e.fetchUser(t),e.user.loggedIn&&"/login"===this.$route.path?this.$router.replace("/"):e.user.loggedIn||"/login"===this.$route.path||this.$router.replace("/login")}))}}),w=y,x=n(7524),Z=n(1009),S=(0,v.Z)(w,i,r,!1,null,null,null),C=S.exports;g()(S,{VApp:x.Z,VMain:Z.Z});var A=n(9132);s.Z.use(A.Z);var T=new A.Z({theme:{dark:!0,options:{customProperties:!0},themes:{light:{primary:"#ffc107",secondary:"#17a2b8"},dark:{primary:{base:"#ffc107",lighten1:"#ffd68c",lighten2:"#ffe9c1"},secondary:"#17a2b8",anchor:"#ffe9c1",background:{base:"#121212",lighten1:"#252627"},dark_background:"#121212"}}}}),V=n(6497),L=n(8345),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("song-list")},E=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header-actions",[n("v-text-field",{staticClass:"search",attrs:{dense:"",label:"Search",clearable:"",outlined:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),n("b",[t._v("Total:")]),t._v(" "+t._s(t.songs.length)+" "),t.isSetList?n("div",[n("b",[t._v("Duration:")]),t._v(" "+t._s(t.totalDuration)+" ")]):t._e(),n("v-data-table",{staticClass:"song-list",attrs:{headers:t.headers,headerProps:t.headerProps,items:t.sortedSongs,"sort-by":"artist",search:t.search,"hide-default-footer":"","disable-pagination":"",loading:t.loading},on:{"click:row":t.clickRow},scopedSlots:t._u([{key:"item.addToSet",fn:function(e){var s=e.item;return[s.in_set_list?n("v-btn",{attrs:{color:"primary",fab:"","x-small":""},on:{click:function(e){return e.stopPropagation(),t.onSetListClick(s)}}},[n("v-icon",[t._v("mdi-check")])],1):n("v-btn",{attrs:{color:"primary",fab:"","x-small":"",outlined:""},on:{click:function(e){return e.stopPropagation(),t.onSetListClick(s)}}},[n("v-icon",[t._v("mdi-plus")])],1)]}},{key:"item.tab_link",fn:function(e){var s=e.item;return[""!=s.tab_link?n("v-icon",{attrs:{color:"primary"}},[t._v("mdi-check")]):t._e()]}},{key:"item.duration_seconds",fn:function(e){var n=e.item;return[t._v(" "+t._s(t.secondsToMinutes(n.duration_seconds))+" ")]}}])})],1)},I=[],O=(n(3204),n(6621),n(9423));const M=u.Z.initializeApp({apiKey:"AIzaSyA0ESHtyir-Di4xNEdMAvdrTWNHv0DlE80",authDomain:"brads-covers.firebaseapp.com",projectId:"brads-covers",storageBucket:"brads-covers.appspot.com",messagingSenderId:"230739198962",appId:"1:230739198962:web:3b3690e4101c644ae2e16b"}),P=((0,O.yu)(M,{provider:new O.z9("6LfLgt4gAAAAAJcmapqbBIlF7Xo2o-Z0EiRB9cwR")}),M.firestore());var D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-row",[t._t("default"),n("v-spacer"),n("router-link",{staticClass:"mr-4",attrs:{to:"/setlist"}},[n("v-btn",{attrs:{color:"secondary"}},[t._v("Set List")])],1),n("router-link",{attrs:{to:"/add"}},[n("v-btn",{attrs:{color:"primary"}},[t._v("Add New")])],1)],2)},N=[],j=s.Z.extend({name:"HeaderActions"}),R=j,q=(0,v.Z)(R,D,N,!1,null,"337fc5ac",null),H=q.exports;g()(q,{VBtn:f.Z,VRow:m.Z,VSpacer:_.Z});var z=s.Z.extend({name:"SongList",components:{HeaderActions:H},props:{isSetList:{type:Boolean,default:!1}},firestore:{songs:P.collection("songs")},data(){return{search:"",songs:[],headerProps:{sortIcon:"mdi-arrow-drop-down"},headers:[{text:"",value:"addToSet",width:50,sortable:!1},{text:"Title",value:"title"},{text:"Artist",value:"artist",width:220,groupable:!0},{text:"Tab",value:"tab_link",width:70},{text:"Genre",value:"genre",width:120},{text:"Capo",value:"capo",width:80},{text:"Key",value:"song_key",width:70},{text:"Tuning",value:"tuning",width:100},{text:"Duration",value:"duration_seconds",width:100}],sortBy:"artist",sortAsc:!0,loading:!1}},methods:{secondsToMinutes:function(t){if([NaN,null,void 0,""].includes(t))return"";var e=Math.floor(t/60),n=t-60*e;function s(t,e,n){return(new Array(n+1).join(e)+t).slice(-n)}return e+":"+s(n,"0",2)},createSong(t,e){const n=t.data();return{id:t.id.toString(),title:n.title,artist:n.artist,tab_link:n.tab_link,genre:n.genre,capo:n.capo,song_key:n.song_key,tuning:n.tuning,duration_seconds:n.duration_seconds,in_set_list:n.in_set_list}},redirectToSong(t){this.$router.push(`/song/${t}`)},clickRow(t){this.redirectToSong(t.id)},async onSetListClick(t){const e={...t};e.in_set_list=!t.in_set_list,P.collection("songs").doc(t.id).set(e).then((()=>{t.in_set_list=!t.in_set_list}))},searchMatches(t){return!!t.title.toLowerCase().includes(this.search.toLowerCase())||(!!t.artist.toLowerCase().includes(this.search.toLowerCase())||void 0)},sortByColThenArtist(t,e){let n=e;switch(t){case"tab":n=e.sort(((t,e)=>""!=t.tab_link&&""==e.tab_link?-1:""==t.tab_link&&""!=e.tab_link?1:0))}return this.sortByArtist(n)},sortByArtist(t){return t.sort(((t,e)=>{let n=t.artist.replace("The ",""),s=e.artist.replace("The ","");return n==s?this.sortAsc?t.title.localeCompare(e.title):e.title.localeCompare(e.title):this.sortAsc?n.localeCompare(s):s.localeCompare(n)}))},changeSort(t){this.sortBy==t.target.id?this.sortAsc=!this.sortAsc:(this.sortBy=t.target.id,this.sortAsc=!0)}},computed:{totalDuration(){let t=0;return this.sortedSongs.forEach((e=>t+=e.duration_seconds?e.duration_seconds:0)),0==t?"-:--":this.secondsToMinutes(t)},sortedSongs:function(){let t=this.songs;return this.isSetList&&(t=t.filter((t=>t.in_set_list))),t}}}),F=z,U=n(3291),K=n(6428),W=n(5978),G=(0,v.Z)(F,B,I,!1,null,"515121f5",null),J=G.exports;g()(G,{VBtn:f.Z,VDataTable:U.Z,VIcon:K.Z,VTextField:W.Z});var Q=s.Z.extend({name:"HomeView",components:{SongList:J},created(){document.title="Brad's Covers"}}),X=Q,Y=(0,v.Z)(X,$,E,!1,null,null,null),tt=Y.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{staticClass:"d-flex flex-column login-form"},[n("v-col",[n("v-text-field",{attrs:{outlined:"",dense:"",required:"",label:"Email",autofocus:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{outlined:"",dense:"",required:"",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-row",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",type:"submit",loading:t.loading},on:{click:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[t._v("Log In")]),n("v-spacer")],1)],1)],1),t._v(" "+t._s(t.error)+" ")],1)},nt=[],st=s.Z.extend({data(){return{valid:!1,email:"",password:"",error:"",loading:!1}},methods:{submit(){const t=this.$refs.form;this.valid=t.validate(),this.valid&&(this.loading=!0,u.Z.auth().signInWithEmailAndPassword(this.email,this.password).then((()=>{this.loading=!1})).catch((t=>{this.error=t.message,this.loading=!1})))}}}),it=st,rt=n(2102),ot=n(6232),at=(0,v.Z)(it,et,nt,!1,null,"1ddec887",null),lt=at.exports;g()(at,{VBtn:f.Z,VCol:rt.Z,VForm:ot.Z,VRow:m.Z,VSpacer:_.Z,VTextField:W.Z});var ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("song-view")},ut=[],dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-row",{staticClass:"d-flex flex-column"},[n("v-col",[n("header-actions")],1),n("v-col",[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",{staticClass:"song-form"},[n("v-row",{staticClass:"d-flex flex-column"},[n("v-text-field",{attrs:{outlined:"",dense:"",required:"",rules:[t.rules.required],label:"Title"},on:{paste:function(e){return e.preventDefault(),t.handlePaste.apply(null,arguments)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("v-text-field",{attrs:{outlined:"",dense:"",required:"",rules:[t.rules.required],label:"Artist"},model:{value:t.artist,callback:function(e){t.artist=e},expression:"artist"}}),n("v-text-field",{attrs:{outlined:"",dense:"",label:"Genre"},model:{value:t.genre,callback:function(e){t.genre=e},expression:"genre"}}),n("v-text-field",{attrs:{outlined:"",dense:"",rules:[t.rules.numeric],label:"Capo"},model:{value:t.capo,callback:function(e){t.capo=e},expression:"capo"}}),n("v-text-field",{attrs:{outlined:"",dense:"",label:"Key"},model:{value:t.song_key,callback:function(e){t.song_key=e},expression:"song_key"}}),n("v-text-field",{attrs:{outlined:"",dense:"",label:"Tuning"},model:{value:t.tuning,callback:function(e){t.tuning=e},expression:"tuning"}}),n("v-text-field",{attrs:{outlined:"",dense:"",rules:[t.rules.time],label:"Duration"},model:{value:t.duration,callback:function(e){t.duration=e},expression:"duration"}}),n("v-text-field",{attrs:{outlined:"",dense:"",label:"Tab"},model:{value:t.tab_link,callback:function(e){t.tab_link=e},expression:"tab_link"}})],1),n("v-row",[""!=t.tab_link&&t.songExists?n("v-btn",{staticClass:"mr-4",attrs:{"append-icon":"mdi-open-in-new",color:"secondary",href:t.tab_link,target:"_blank"}},[t._v(" View Tab ")]):t._e(),t.songExists?n("v-btn",{attrs:{"append-icon":"mdi-open-in-new",color:"secondary",href:t.lyrics_url,target:"_blank"}},[t._v(" View Lyrics")]):t._e(),n("v-spacer"),t.songExists&&t.in_set_list?n("v-btn",{staticClass:"mr-4",attrs:{color:"secondary"}},[t._v("Remove from Set List")]):t.songExists&&!t.in_set_list?n("v-btn",{staticClass:"mr-4",attrs:{color:"secondary"}},[t._v("Add to Set List")]):t._e(),n("v-btn",{attrs:{color:"primary"},on:{click:t.onSaveClick}},[t._v("Save")])],1)],1)],1)],1)],1),n("v-snackbar",{attrs:{timeout:"2000",color:"primary"},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v("Saved")])],1)},ht=[],vt=n(3796);class pt{constructor(t){(0,vt.Z)(this,"id",""),(0,vt.Z)(this,"title",""),(0,vt.Z)(this,"artist",""),(0,vt.Z)(this,"tab_link",""),(0,vt.Z)(this,"genre",""),(0,vt.Z)(this,"capo",0),(0,vt.Z)(this,"song_key",""),(0,vt.Z)(this,"tuning",""),(0,vt.Z)(this,"duration_seconds",0),(0,vt.Z)(this,"in_set_list",!1),t&&(this.id=t.id,this.title=t.title,this.artist=t.artist,this.tab_link=t.tab_link,this.genre=t.genre,this.capo=t.capo,this.song_key=t.song_key,this.tuning=t.tuning,this.duration_seconds=t.duration_seconds,this.in_set_list=t.in_set_list)}}var gt=s.Z.extend({components:{HeaderActions:H},computed:{songExists(){return![NaN,null,void 0,""].includes(this.id)},lyrics_url(){if(!this.songExists)return"";let t=this.artist.toLowerCase();t=t.replace(/^[Tt]he|[Aa]\b/,""),t=t.replaceAll(/[^A-Za-z0-9]*/g,"");let e=this.title.toLowerCase();return e=e.replaceAll(/[^A-Za-z0-9]*/g,""),`https://azlyrics.com/lyrics/${t}/${e}.html`}},data(){return{song:null,id:"",title:"",artist:"",valid:!1,tab_link:"",genre:"",capo:"",song_key:"",tuning:"",duration:"",tab:"",lyrics:"",in_set_list:!1,rules:{required:t=>!!t||"Required",numeric:t=>/^[0-9]+$|^$/.test(t)||"Must be a number",time:t=>/^[0-9]+:[0-9]{2}$|^$/.test(t)||"Must be time format (0:00)"},snackbar:!1,loading:!0}},methods:{async getSong(){this.id=this.$route.params.id;const t=(await P.collection("songs").doc(this.id).get()).data();let e="Brad's Covers - ";if(t){const n=new pt(t);this.title=n.title,this.artist=n.artist,this.tab_link=n.tab_link,this.genre=n.genre,this.capo=n.capo>-1?n.capo.toString():"",this.song_key=n.song_key,this.tuning=n.tuning,this.duration=this.secondsToMinutes(n.duration_seconds),""!=this.tab_link&&this.getTabContent(),this.in_set_list=n.in_set_list,e+=this.title}else e+="Add New";document.title=e},onSaveClick(){const t={title:this.title.trim(),artist:this.artist.trim(),tab_link:this.tab_link&&this.tab_link.trim()||"",genre:this.genre&&this.genre.trim()||"",capo:this.capo&&this.capo.trim()||-1,song_key:this.song_key&&this.song_key.trim()||"",tuning:this.tuning&&this.tuning.trim()||"",duration_seconds:this.duration&&this.minutesToSeconds(this.duration.trim())||""};this.id?this.updateSong(t,this.id):this.addSong(t)},async updateSong(t,e){this.validate(),this.valid&&(this.valid=!1,await P.collection("songs").doc(e).update(t).then((()=>{this.showSavedSnackbar()})))},async addSong(t){this.validate(),this.valid&&await P.collection("songs").add(t).then((t=>{this.$router.push(`/song/${t.id}`),this.showSavedSnackbar()}))},validate(){const t=this.$refs.form;t&&(this.valid=t.validate())},showSavedSnackbar(){this.snackbar=!0},getTabContent(){},secondsToMinutes(t){if([NaN,null,void 0,""].includes(t))return"";var e=Math.floor(t/60),n=t-60*e;function s(t,e,n){return(new Array(n+1).join(e)+t).slice(-n)}return e+":"+s(n,"0",2)},minutesToSeconds(t){if([NaN,null,void 0,""].includes(t))return null;const e=t.split(":");return 60*parseInt(e[0])+parseInt(e[1])},handlePaste(t){const e=t.clipboardData.getData("text");if(e.includes("\t")){const t=e.split("\t");this.title=t[0]||"",this.artist=t[1]||"",this.genre=t[2]||"",this.capo=t[3]||"",this.song_key=t[4]||"",this.tuning=t[5]||"",this.duration=this.secondsToMinutes(t[6])||"",this.tab_link=t[7]||""}}},mounted(){this.getSong(),this.loading=!1}}),ft=gt,mt=n(9846),_t=n(3202),bt=(0,v.Z)(ft,dt,ht,!1,null,"28452190",null),kt=bt.exports;g()(bt,{VBtn:f.Z,VCol:rt.Z,VContainer:mt.Z,VForm:ot.Z,VRow:m.Z,VSnackbar:_t.Z,VSpacer:_.Z,VTextField:W.Z});var yt=s.Z.extend({components:{SongView:kt},created(){document.title="Brad's Covers - Add New"}}),wt=yt,xt=(0,v.Z)(wt,ct,ut,!1,null,null,null),Zt=xt.exports,St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("song-list",{attrs:{"is-set-list":""}})},Ct=[],At=s.Z.extend({name:"SetListView",components:{SongList:J},data(){return{}},created(){document.title="Brad's Covers - Set List"},methods:{}}),Tt=At,Vt=(0,v.Z)(Tt,St,Ct,!1,null,null,null),Lt=Vt.exports;s.Z.config.productionTip=!1,s.Z.use(V.S);const $t=new L.Z({routes:[{path:"/",name:"HomeView",component:tt},{path:"/login",name:"LoginView",component:lt},{path:"/add",name:"AddView",component:Zt},{path:"/setlist",name:"SetListView",component:Lt},{path:"/song/:id",name:"SongView",component:kt}]});s.Z.use(L.Z),s.Z.use(l.og);const Et=(0,l.WB)();new s.Z({vuetify:T,router:$t,pinia:Et,render:t=>t(C)}).$mount("#app"),$t.beforeEach(((t,e,n)=>{const s=c();s.user.loggedIn&&"/login"===t.path||s.user.loggedIn||"/login"===t.path?n():n("/login")}))}},e={};function n(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,s,i,r){if(!s){var o=1/0;for(u=0;u<t.length;u++){s=t[u][0],i=t[u][1],r=t[u][2];for(var a=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(n.O).every((function(t){return n.O[t](s[l])}))?s.splice(l--,1):(a=!1,r<o&&(o=r));if(a){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[s,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,r,o=s[0],a=s[1],l=s[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)var u=l(n)}for(e&&e(s);c<o.length;c++)r=o[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},s=self["webpackChunkbrads_covers_vue"]=self["webpackChunkbrads_covers_vue"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=n.O(void 0,[998],(function(){return n(6510)}));s=n.O(s)})();
//# sourceMappingURL=app.835d7ead.js.map